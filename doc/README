Скрипт загружает метаинформацию о rpm пакетах в базу данных.


Зависимости:
    python3-module-rpm
    python3-module-clickhouse-driver
    python3-module-pycdlib


Файлы:
    extract.py - Скрипт отвечающей за загрузку
    mapper.py - Функции для конвертации данных
    utils.py - Вспомогательные функции
    manager.py - скрипт управления инициализацией и обновлением структуры БД
    sql/* - Sql файлы структуры базы данных
    config.ini.example - Пример файла конфигурации


Устройство базы данных:
### ВНИМАНИЕ ###
В папке sql под порядковым номером и именем хранится история изменений схемы 
базы данных проекта.

ЛЮБОЕ ИЗМЕНЕНИЕ структуры базы данных должно производиться с помощью нового sql файлы с инструкциями.

0000_initial.sql - последняя версия струтуры БД
0001_update.sql - обновление до версии 1
0002_update.sql - обновление до версии 2

Все манипуляции с БД производяться с помощью manager.py

Аргументы запуска manager.py

    -U, --update - инициализация и обновление (без этого ключа просто вывод информации о версиях)
    -d, --dbname - имя базы данных
    -s, --host - хост базы данных 
    -p, --port - порт базы данных 
    -u, --user - имя пользователя базы данных 
    -P, --password - пароль пользователя базы данных 
    -h, --help - вызов справки

инициализация и обновление БД с помощью скрипта.
- вывод информации о версиях:
    $python3 manager.py -d dbname -u testuser
    Latest version in database: 0
    Latest version by files: 3
- инициализация и обновление ключ -U или --update
    $python3 manager.py -d dbname -u testuser -U
    update: 0000_initial.sql
    Latest version in database: 0
    Latest version by files: 3
    update: 0001_update.sql
    update: 0002_update.sql
    update: 0003_update.sql
    $python3 manager.py -d dbname -u testuser
    Latest version in database: 3
    Latest version by files: 3
    Nothing to update

Аргументы запуска extract.py:
    assignment - обязательный позиционный аргумент. например: P8 или Sisyphus или C8
    path - обязательный позиционный аргумент. путь к rpm файлам например /mnt/repo/Sisyphus/files/ или файл iso образа
    -t, --tag - дополнительное имя для таблицы AssignmentName
    -c, --config - путь к файлу конфигурации
    -d, --dbname - имя базы данных
    -s, --host - хост базы данных 
    -p, --port - порт базы данных 
    -u, --user - имя пользователя базы данных 
    -P, --password - пароль пользователя базы данных 
    -w, --workers - количество потоков 
    -D, --debug - включает вывод отладочной информации в лог файл
    -T, --timing - включать в лог время исполнения функций
    -v, --verbose - выводить промежуточный результат загрузки
    -A, --date - позволяет указать конкретную дату для assignment
    -h, --help - вызов справки


В качестве аргумента path можно указать файл iso образ, скрипт загрузит все доступные в указанном iso rpm пакеты

Примеры запуска:
    python3 extract.py Sisyphus /mnt/repo/Sisyphus/files/ -d alt1 -w 10 -u underwit -D
    python3 extract.py P8 /mnt/repo/p8/branch/files/ --config ./config.ini -w 25
    python3 extract.py P9 /home/test/iso/alt-workstation-8.3-x86_64.iso --config ./config.ini -w 10 -D -T
